import React, { useState, useEffect } from "react";
import { View, Text, StyleSheet, ImageBackground, Dimensions, StatusBar, FlatList } from "react-native";
import SearchBar from './SearchBar';
import { haze, rainy, snow, sunny } from '../assets/img';

export default function WeatherContainer({ weatherData }) {

  const [backgroundImage, setBackgroundImage] = useState(null);
  const {
    weather,
    name,
    main: { temp, humidity }
  } = weatherData;


  useEffect(() => {
     setBackgroundImage(getBackgroundImg(weather[0].main));
  }, [weatherData])

  function getBackgroundImg(weather) {
    if(weather === 'Smoke') return snow
    if(weather === 'Snow') return snow
    if(weather === 'Sunny') return sunny
    if(weather === 'Rainy') return rainy
    if(weather === 'Haze') return haze
    if(weather === 'Clouds') return snow
    return rainy;
  } 

  return (
    <View style={styles.container}>
      <ImageBackground
        source={backgroundImage}
        style={styles.backgroundImg}
        resizeMode="cover"
      >
        <SearchBar />
        <View style={{ alignItems: 'center' }}>
          <Text style={{color: 'white'}}>{name}</Text>

        </View>

      </ImageBackground>
    </View>
  )
}
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#0fff',
    alignItems: 'center',
  },
  backgroundImg: {
    flex: 1,
    width: Dimensions.get('screen').width
  }
});
